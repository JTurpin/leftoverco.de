<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>GCP VM Migration &#183; LeftOverCo.de</title><meta name=description content><link href=/css/katex.css rel=stylesheet><link href=/css/concated.min.css rel=stylesheet></head><body class=single-body><nav class="nav-bar side-padding"><h1 class=nav-header><a href class=nav-text>LeftOverCo.de</a></h1><div class=hamburger-menu><button onclick=hamburgerMenuPressed.call(this) aria-haspopup=true aria-expanded=false aria-controls=menu aria-label=Menu>
<span></span><span></span></button><ul id=menu class=hamburger-menu-overlay><li><a href class=hamburger-menu-overlay-link>Home</a></li><li><a href=/categories/cloud-computing/ class=hamburger-menu-overlay-link>cloud computing</a></li><li><a href=/categories/gcp/ class=hamburger-menu-overlay-link>gcp</a></li><li><a href=/categories/home-automation/ class=hamburger-menu-overlay-link>home automation</a></li></ul></div></nav><main class="content side-text-padding"><article class="post dropcase"><header class=post-header><h1 class=post-title>GCP VM Migration</h1><p class=post-date>Posted <time datetime=2020-12-04>Dec 4, 2020</time></p></header><h1 id=how-to-migrate-a-vm-between-gcp-projects>How to migrate a VM between GCP projects</h1><p>Have you ever had a sever that was not created via automated processes and needed to move that VM to another project in GCP? Searching the internet will lead you down all sort of rabbit holes on the old way of doing things. They all seem to point at spinning up a new server, cloning the disk via <code>dd</code> and them creating the new VM fom that disk image. There is a much better and faster way now.</p><ol><li>Go to the GCP console and select Compute Engine &ndash;> Images<figure><a href=/posts/gcp-vm-migration/gcp-menu.png><img srcset="/posts/gcp-vm-migration/gcp-menu_hud7742c8d2736b27cf45b37888bfe10a1_261810_320x0_resize_box_2.png 320w,
/posts/gcp-vm-migration/gcp-menu_hud7742c8d2736b27cf45b37888bfe10a1_261810_600x0_resize_box_2.png 600w,
/posts/gcp-vm-migration/gcp-menu_hud7742c8d2736b27cf45b37888bfe10a1_261810_1200x0_resize_box_2.png 2x" src=/posts/gcp-vm-migration/gcp-menu_hud7742c8d2736b27cf45b37888bfe10a1_261810_600x0_resize_box_2.png alt="GCP Menu"></a><figcaption><p>GCP Menu</p></figcaption></figure></li><li>Create a new image<figure><a href=/posts/gcp-vm-migration/create-image.png><img srcset="/posts/gcp-vm-migration/create-image_hub1446d9390bf9e6cd683757d64e75b11_43590_320x0_resize_box_2.png 320w,
/posts/gcp-vm-migration/create-image_hub1446d9390bf9e6cd683757d64e75b11_43590_600x0_resize_box_2.png 600w,
/posts/gcp-vm-migration/create-image_hub1446d9390bf9e6cd683757d64e75b11_43590_1200x0_resize_box_2.png 2x" src=/posts/gcp-vm-migration/create-image_hub1446d9390bf9e6cd683757d64e75b11_43590_600x0_resize_box_2.png alt="Create new image"></a><figcaption><p>Create new image</p></figcaption></figure></li><li>Give the image a name, Source should be <code>Disk</code> and select the Source disk as host you would like to move. It&rsquo;s best if the host is powered off.<figure><a href=/posts/gcp-vm-migration/create-image-setting.png><img srcset="/posts/gcp-vm-migration/create-image-setting_hu701588a8d64a292649c2c7dffda5ddd2_280485_320x0_resize_box_2.png 320w,
/posts/gcp-vm-migration/create-image-setting_hu701588a8d64a292649c2c7dffda5ddd2_280485_600x0_resize_box_2.png 600w,
/posts/gcp-vm-migration/create-image-setting_hu701588a8d64a292649c2c7dffda5ddd2_280485_1200x0_resize_box_2.png 2x" src=/posts/gcp-vm-migration/create-image-setting_hu701588a8d64a292649c2c7dffda5ddd2_280485_600x0_resize_box_2.png alt="Create image settings"></a><figcaption><p>Create image settings</p></figcaption></figure></li><li>Ensure your user has permissions to access the new image</li><li>Switch projects to the new project you&rsquo;d like the VM running in.</li><li>Compute Engine &ndash;> Virtual Machines &ndash;> VM Instances</li><li>Create a new instance</li><li>Change the <code>Boot Disk</code><figure><a href=/posts/gcp-vm-migration/boot-disk-image.png><img srcset="/posts/gcp-vm-migration/boot-disk-image_hu4f592d94089805bbe1e3d7e30c406573_243818_320x0_resize_box_2.png 320w,
/posts/gcp-vm-migration/boot-disk-image_hu4f592d94089805bbe1e3d7e30c406573_243818_600x0_resize_box_2.png 600w,
/posts/gcp-vm-migration/boot-disk-image_hu4f592d94089805bbe1e3d7e30c406573_243818_1200x0_resize_box_2.png 2x" src=/posts/gcp-vm-migration/boot-disk-image_hu4f592d94089805bbe1e3d7e30c406573_243818_600x0_resize_box_2.png alt="Boot disk settings"></a><figcaption><p>Boot disk settings</p></figcaption></figure></li><li><code>Show images from</code> is the source projects. <code>Image</code> is the image name we create above. Increase disk size if needed.</li><li><code>Select</code> the settings to apply them</li><li>Verify VM settings and then click <code>Create</code></li></ol></article></main><nav class="end-nav side-padding"></nav><footer class=side-padding style=background-image:url(img/home-blob-flip.svg)><a href class=footer-link><img class=footer-icon src=/icons/home-page.png></a></footer><script defer src=/js/katex.js></script><script defer src=/js/auto-render.js onload=renderMathInElement(document.body);></script><script src=/js/core.min.js></script></body></html>