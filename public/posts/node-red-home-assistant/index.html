<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><title>Node Red and Home Assistant &#183; LeftOverCo.de</title><meta name=description content><link href=/css/katex.css rel=stylesheet><link href=/css/concated.min.css rel=stylesheet></head><body class=single-body><nav class="nav-bar side-padding"><h1 class=nav-header><a href class=nav-text>LeftOverCo.de</a></h1><div class=hamburger-menu><button onclick=hamburgerMenuPressed.call(this) aria-haspopup=true aria-expanded=false aria-controls=menu aria-label=Menu>
<span></span><span></span></button><ul id=menu class=hamburger-menu-overlay><li><a href class=hamburger-menu-overlay-link>Home</a></li><li><a href=/categories/cloud-computing/ class=hamburger-menu-overlay-link>cloud computing</a></li><li><a href=/categories/gcp/ class=hamburger-menu-overlay-link>gcp</a></li><li><a href=/categories/home-automation/ class=hamburger-menu-overlay-link>home automation</a></li></ul></div></nav><main class="content side-text-padding"><article class="post dropcase"><header class=post-header><h1 class=post-title>Node Red and Home Assistant</h1><p class=post-date>Posted <time datetime=2020-12-08>Dec 8, 2020</time></p></header><h1 id=how-to-migrate-a-vm-between-gcp-projects>How to migrate a VM between GCP projects</h1><p>This post assumes that you already have node-red running and it&rsquo;s able to talk to home-assistant.</p><ol><li>Click the Menu in the top left corner then select <code>Manage Palette</code><figure><a href=/posts/node-red-home-assistant/manage-palette.jpg><img srcset="/posts/node-red-home-assistant/manage-palette_hud13062f843b7f9002e667ec8e11697c5_117469_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/manage-palette_hud13062f843b7f9002e667ec8e11697c5_117469_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/manage-palette_hud13062f843b7f9002e667ec8e11697c5_117469_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/manage-palette_hud13062f843b7f9002e667ec8e11697c5_117469_600x0_resize_q75_box.jpg alt="Manage Palette"></a><figcaption><p></p></figcaption></figure></li><li>Click on <code>Install</code> then in the searchbox, seach for <code>home-assistant</code> and install both <code>node-red-contrib-home-assistant-websocket</code> and <code>node-red-contrib-hass</code><figure><a href=/posts/node-red-home-assistant/install-palette.jpg><img srcset="/posts/node-red-home-assistant/install-palette_hu33cce9b524e68f5a258a1d45af68bd82_569008_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/install-palette_hu33cce9b524e68f5a258a1d45af68bd82_569008_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/install-palette_hu33cce9b524e68f5a258a1d45af68bd82_569008_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/install-palette_hu33cce9b524e68f5a258a1d45af68bd82_569008_600x0_resize_q75_box.jpg alt="Install home-assistant palettes"></a><figcaption><p></p></figcaption></figure></li><li>Configure the connection to your Home-Assistant server.<figure><a href=/posts/node-red-home-assistant/hass-config.jpg><img srcset="/posts/node-red-home-assistant/hass-config_hu4b4f04a261fb68530347d5aacd0b3358_100937_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/hass-config_hu4b4f04a261fb68530347d5aacd0b3358_100937_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/hass-config_hu4b4f04a261fb68530347d5aacd0b3358_100937_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/hass-config_hu4b4f04a261fb68530347d5aacd0b3358_100937_600x0_resize_q75_box.jpg alt="configure hass connection"></a><figcaption><p></p></figcaption></figure></li><li>In a new tab, open up your home-assistant web interface and get an <code>Access Token</code>. First, click on your username in the bottom left corner, then scroll to the bottom and click create <code>Create Token</code> in the <code>Long-Lived Access Tokens</code> section.<figure><a href=/posts/node-red-home-assistant/create-token.jpg><img srcset="/posts/node-red-home-assistant/create-token_hua06f591a9afa6e621e48e12f5066c88a_116439_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/create-token_hua06f591a9afa6e621e48e12f5066c88a_116439_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/create-token_hua06f591a9afa6e621e48e12f5066c88a_116439_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/create-token_hua06f591a9afa6e621e48e12f5066c88a_116439_600x0_resize_q75_box.jpg alt="Create long lived token"></a><figcaption><p></p></figcaption></figure></li><li>Give the token a name that you will remember like <code>node-red</code> then press <code>OK</code>.<figure><a href=/posts/node-red-home-assistant/token-name.jpg><img srcset="/posts/node-red-home-assistant/token-name_hu110af25b407ecfc06ed08d3944dcb355_44984_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/token-name_hu110af25b407ecfc06ed08d3944dcb355_44984_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/token-name_hu110af25b407ecfc06ed08d3944dcb355_44984_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/token-name_hu110af25b407ecfc06ed08d3944dcb355_44984_600x0_resize_q75_box.jpg alt="name the long lived token"></a><figcaption><p></p></figcaption></figure></li><li>Copy the access tocken and save it somewhere safe. It will only be shown one time.</li><li>configure the home assistant connection settings.<figure><a href=/posts/node-red-home-assistant/hass-connection-settings.jpg><img srcset="/posts/node-red-home-assistant/hass-connection-settings_hu9e1f1903e5604db071660a64d9a765ce_299661_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/hass-connection-settings_hu9e1f1903e5604db071660a64d9a765ce_299661_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/hass-connection-settings_hu9e1f1903e5604db071660a64d9a765ce_299661_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/hass-connection-settings_hu9e1f1903e5604db071660a64d9a765ce_299661_600x0_resize_q75_box.jpg alt="configure hass connection settings"></a><figcaption><p></p></figcaption></figure></li><li>Now you can create your first flow!<figure><a href=/posts/node-red-home-assistant/create-flow.jpg><img srcset="/posts/node-red-home-assistant/create-flow_hu5f52798640b5b5ed2837a99e58588718_918154_320x0_resize_q75_box.jpg 320w,
/posts/node-red-home-assistant/create-flow_hu5f52798640b5b5ed2837a99e58588718_918154_600x0_resize_q75_box.jpg 600w,
/posts/node-red-home-assistant/create-flow_hu5f52798640b5b5ed2837a99e58588718_918154_1200x0_resize_q75_box.jpg 2x" src=/posts/node-red-home-assistant/create-flow_hu5f52798640b5b5ed2837a99e58588718_918154_600x0_resize_q75_box.jpg alt="create node-red flow"></a><figcaption><p></p></figcaption></figure></li></ol></article></main><nav class="end-nav side-padding"><a ontouchstart=cardPressed.call(this) ontouchend=cardReleased.call(this) ontouchmove=cardReleased.call(this) href=/posts/gcp-vm-migration/ class="card blog-card bc-next" rel=bookmark><article class=card-body><h2 class=card-title>GCP VM Migration</h2><p class=card-text>How to migrate a VM between GCP projects Have you ever had a sever that was not created via automated processes and needed to move that VM to another project in GCP? Searching the internet will lead you down all sort of rabbit holes on the old way of doing things. They all seem to point at spinning up a new server, cloning the disk via dd and them creating the new VM fom that disk image.</p><div class="card-subtext muted-text"><p>Posted <time datetime="2020-12-04 124:00">Dec 4, 2020</time></p><p>#gcp #cloud computing</p></div></article></a></nav><footer class=side-padding style=background-image:url(img/home-blob-flip.svg)><a href class=footer-link><img class=footer-icon src=/icons/home-page.png></a></footer><script defer src=/js/katex.js></script><script defer src=/js/auto-render.js onload=renderMathInElement(document.body);></script><script src=/js/core.min.js></script></body></html>